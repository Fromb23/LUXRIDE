<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
  <style>
    .bg-gradient-primary {
      background: linear-gradient(135deg, #16242e, #2d3748);
    }

    .sidebar-item {
      transition: all 0.2s ease;
      position: relative;
    }

    .sidebar-item:hover {
      background-color: rgba(244, 197, 66, 0.1);
    }

    .sidebar-item.active {
      background-color: rgba(244, 197, 66, 0.1);
    }

    .sidebar-item.active::after {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 3px;
      background: #f4c542;
    }

    .dropdown-menu {
      transition: all 0.2s ease;
      opacity: 0;
      visibility: hidden;
      transform: translateY(5px);
    }

    .dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .card {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    @media (max-width: 768px) {
      .mobile-menu {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }

      .mobile-menu.open {
        transform: translateX(0);
      }
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800 min-h-screen font-sans">
  <header class="bg-gradient-primary text-white p-4 flex justify-between items-center shadow-lg">
    <h1 class="text-xl md:text-2xl font-bold">
      <i class="fas fa-car text-yellow-400 mr-2"></i>
      Luxride Admin
    </h1>

    <div class="flex items-center space-x-4">
      <div class="hidden md:flex items-center space-x-2 bg-white bg-opacity-10 px-3 py-1 rounded-full">
        <i class="fas fa-bell"></i>
        <span class="text-sm">Notifications</span>
      </div>
      <div class="relative dropdown cursor-pointer">
        <div class="flex items-center space-x-2">
          <div class="text-right hidden md:block">
            <h4 class="text-sm font-medium">{{ request.user.full_name }}</h4>
            <p class="text-xs opacity-75">Admin</p>
          </div>
          <img src="https://i.ibb.co/tYv8t4q/user-icon.png" class="w-10 h-10 rounded-full border-2 border-white"
            alt="Admin" />
        </div>
        <div class="dropdown-menu absolute right-0 mt-2 bg-white text-gray-800 rounded-md shadow-lg w-48 z-50">
          <a href="#" class="block px-4 py-2 hover:bg-gray-100 transition">
            <i class="fas fa-cog mr-2"></i> Settings
          </a>
          <a href="{% url 'logout' %}" class="block px-4 py-2 hover:bg-gray-100 transition text-red-500">
            <i class="fas fa-sign-out-alt mr-2"></i> Logout
          </a>
        </div>
      </div>
    </div>
  </header>

  <div class="flex flex-col md:flex-row min-h-[calc(100vh-72px)]">>
    <button id="mobile-menu-button" class="md:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-md shadow-md">
      <i class="fas fa-bars text-gray-700"></i>
    </button>

    <!-- Sidebar -->
    <aside id="sidebar"
      class="mobile-menu w-full md:w-64 bg-[#16242e] text-white p-4 md:p-6 shadow-lg fixed md:static z-40">
      <nav class="space-y-2">
        <a class="block px-4 py-3 rounded-lg sidebar-item active" data-target="dashboard-home">
          <i class="fas fa-tachometer-alt mr-3"></i> Dashboard Home
        </a>
        <a class="block px-4 py-3 rounded-lg sidebar-item" data-target="manage-users">
          <i class="fas fa-users mr-3"></i> Manage Users
        </a>
        <a class="block px-4 py-3 rounded-lg sidebar-item" data-target="manage-cars">
          <i class="fas fa-car mr-3"></i> Manage Cars
        </a>
        <a class="block px-4 py-3 rounded-lg sidebar-item" data-target="borrowing-logs">
          <i class="fas fa-book mr-3"></i> Borrowing Logs
        </a>
      </nav>

      <div class="mt-8 pt-4 border-t border-gray-700">
        <button onclick="loadCreateCarForm()"
          class="w-full text-left px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-gray-900 rounded-md transition">
          <i class="fas fa-plus mr-2"></i> Add New Car
        </button>
      </div>
    </aside>

    <main class="flex-1 p-4 md:p-8 mt-16 md:mt-0" id="main-content">
      <h2 class="text-2xl font-semibold text-yellow-500 mb-6">
        Welcome to the Admin Panel
      </h2>
      <p class="text-lg">
        Manage the car rentals and users effectively. Select an option from
        the left to get started.
      </p>
    </main>
  </div>

  <footer class="bg-white text-center py-4 text-sm text-gray-500 border-t">
    &copy; 2025 Luxride. All rights reserved.
  </footer>

  <script>
    function loadContent(target) {
      const contentMap = {
        "dashboard-home":
          "<h2 class='hidden text-gray-500'>Dashboard Home</h2><p>Welcome to the dashboard home content.</p>",
        "manage-users":
          "<h2 class='hidden text-gray-500'>Manage Users</h2><p>Manage users content goes here...</p>",
        "manage-cars":
          "<h2 class='hidden text-gray-500'>Manage Cars</h2><p>Manage cars content goes here...</p>",
        "borrowing-logs":
          "<h2 class='hidden text-gray-500'>Borrowing Logs</h2><p>Borrowing logs content goes here...</p>",
      };
      if (target === "dashboard-home") {
        fetch("/admin/dashboard/main-content")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("main-content").innerHTML = data;
          })

          .catch((error) => {
            console.error("Error loading admin_main_content.html:", error);
            document.getElementById(target).innerHTML =
              "<p>Error loading content.</p>";
          });
      } else if (target === "manage-users") {
        fetch("/admin/dashboard/users")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("main-content").innerHTML = data;
          })
          .catch((error) => {
            console.error("Error loading manage_users.html:", error);
            document.getElementById(target).innerHTML =
              "<p>Error loading content.</p>";
          });
      } else if (target === "manage-cars") {
        fetch("/admin/dashboard/cars")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("main-content").innerHTML = data;
          })
          .catch((error) => {
            console.error("Error loading manage_cars.html:", error);
            document.getElementById(target).innerHTML =
              "<p>Error loading content.</p>";
          });
      } else if (target === "borrowing-logs") {
        fetch("/admin/dashboard/borrowed-logs")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("main-content").innerHTML = data;
          })
          .catch((error) => {
            console.error("Error loading borrowing_logs.html:", error);
            document.getElementById(target).innerHTML =
              "<p>Error loading content.</p>";
          });
      } else {
        document.getElementById("main-content").innerHTML =
          contentMap[target] || "<p>Content not found.</p>";
      }

      document.getElementById("main-content").innerHTML =
        contentMap[target] || "<p>Content not found.</p>";
      localStorage.setItem("selectedMenu", target);
    }

    document.querySelectorAll(".sidebar-item").forEach((item) => {
      item.addEventListener("click", (event) => {
        const target = event.target.closest(".sidebar-item").dataset.target;
        loadContent(target);
      });
    });

    document.addEventListener("DOMContentLoaded", () => {
      const selectedMenu =
        localStorage.getItem("selectedMenu") || "dashboard-home";
      loadContent(selectedMenu);
    });
    function loadCreateCarForm() {
      fetch("/dashboard/cars/create/")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("main-content").innerHTML = html;
        })
        .catch((err) => {
          console.error("Error loading create_car.html:", err);
          document.getElementById("main-content").innerHTML =
            "<p>Error loading form.</p>";
        });
    }

    document
      .querySelector(".group")
      .addEventListener("click", function (event) {
        const dropdownMenu =
          event.currentTarget.querySelector(".dropdown-menu");
        dropdownMenu.classList.toggle("hidden");
      });

    function previewImage(event) {
      const imagePreview = document.getElementById("image-preview");
      const uploadInfo = document.getElementById("upload-info");

      if (event.target.files && event.target.files[0]) {
        const reader = new FileReader();

        reader.onload = function (e) {
          imagePreview.src = e.target.result;
          imagePreview.classList.remove("hidden");
          uploadInfo.classList.add("hidden");
        };

        reader.readAsDataURL(event.target.files[0]);
      }
    }

    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const sidebar = document.getElementById('sidebar');

    mobileMenuButton.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });
  </script>
</body>

</html>